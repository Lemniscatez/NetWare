using Photon.Pun;
using UnityEngine;
using Assets.Scripts;
using System.Linq;

namespace NetWare.Helpers
{
    public class ExploitsH : MonoBehaviour
    {
        // values
        public static int buildingSpammerTimer = 0;
        public static int autoPlayTimer = 0;
        public static int rigSpamTimer = 0;
        public static string changeSkinId = "293";
        public static string pickaxeChangerId = "Default";

        // game
        public static void ForceWin()
        {
            Network.BecomeMasterClient();
            GameManager.Instance.EndGame(false, false, Enumerable.Range(1, 5).ToList());
        }
        public static void KillAll()
        {
            Network.BecomeMasterClient();

            foreach (PlayerController playerController in Storage.players)
            {
                if (!playerController.IsMine() && Players.IsPlayerAlive(playerController) && !Players.IsPlayerTeammate(playerController))
                {
                    playerController?.photonView?.RPC(
                        "TakeHit",
                        RpcTarget.All,
                        new object[] {
                            100000,
                            playerController?.transform.position,
                            playerController?.photonView?.CreatorActorNr,
                            true
                        }
                    );
                }
            }
        }
        public static void FreezePlayers()
        {
            Network.BecomeMasterClient();

            foreach (PlayerController playerController in Storage.players)
            {
                if (!playerController.photonView.IsMine && Players.IsPlayerAlive(playerController) && !Players.IsPlayerTeammate(playerController))
                {
                    PhotonNetwork.DestroyPlayerObjects(playerController.photonView.Controller);
                }
            }
        }
        public static void DestroyBuildings()
        {
            Network.BecomeMasterClient();

            Network.GetBuildingNetworkController()?.KillAllBuildings(true);
        }
        public static void OpenCrates()
        {
            Network.BecomeMasterClient();

            PlayerController playerController = LocalPlayer.Get();

            if (playerController != null)
            {
                foreach (SupplyCrate supplyCrate in FindObjectsOfType<SupplyCrate>())
                {
                    supplyCrate.OpenCrate(playerController);
                }
            }
        }

        // locker
        public static void UnlockEmotes()
        {
            ServerUser serverUser = FirebaseManager.LIPLNDMKLDB?.IPGFHABIDAC;

            if (serverUser != null)
            {
                for (int index = 1; index <= 100; index++)
                {
                    serverUser.Skins.OwnedEmotes.Add("lol.1v1.playeremotes.pack." + index);
                }
            }
        }
        public static void UnlockStickers()
        {
            ServerUser serverUser = FirebaseManager.LIPLNDMKLDB?.IPGFHABIDAC;

            if (serverUser != null)
            {
                for (int index = 1; index <= 100; index++)
                {
                    serverUser.Skins.OwnedEmotes.Add("lol.1v1.playerstickers.pack." + index);
                }
            }
        }
        public static void ChangeSkin()
        {
            ServerUser serverUser = FirebaseManager.LIPLNDMKLDB?.IPGFHABIDAC;

            if (serverUser != null && int.TryParse(changeSkinId, out _))
            {
                serverUser.Skins.EquippedCharacterSkin = ("lol.1v1.playerskins.pack." + changeSkinId);
            }
        }
        public static void ChangePickaxe()
        {
            ServerUser serverUser = FirebaseManager.LIPLNDMKLDB?.IPGFHABIDAC;

            if (serverUser != null)
            {
                string[] pickaxes = { "Default", "Galactic Smasher", "Warhammer", "Chicken Axe", "Candy Cane", "Lethal Gift" };
                foreach (string pickaxe in pickaxes)
                {
                    string pickaxeId = ("lol.1v1.weaponskins.melee.pickaxe." + pickaxe.ToLower().Replace(" ", ""));
                    switch (pickaxeId)
                    {
                        case "Galactic Smasher":
                            pickaxeId = "lol.1v1.weaponskins.melee.pickaxe.scifihammer";
                            break;
                        case "Chicken Axe":
                            pickaxeId = "lol.1v1.weaponskins.melee.pickaxe.chicken_leg";
                            break;
                        case "Lethal Gift":
                            pickaxeId = "lol.1v1.weaponskins.melee.pickaxe.christmas_present";
                            break;
                    }

                    if (serverUser.Skins.EquippedWeaponSkins.Contains(pickaxeId))
                    {
                        serverUser.Skins.EquippedWeaponSkins.Remove(pickaxeId);
                    }
                    if (serverUser.Skins.WeaponSkins.Contains(pickaxeId))
                    {
                        serverUser.Skins.WeaponSkins.Remove(pickaxeId);
                    }
                }

                switch (pickaxeChangerId)
                {
                    case "Default":
                        serverUser.Skins.EquippedWeaponSkins.Add("lol.1v1.weaponskins.melee.pickaxe.default");
                        serverUser.Skins.WeaponSkins.Add("lol.1v1.weaponskins.melee.pickaxe.default");
                        break;
                    case "Galactic Smasher":
                        serverUser.Skins.EquippedWeaponSkins.Add("lol.1v1.weaponskins.melee.pickaxe.scifihammer");
                        serverUser.Skins.WeaponSkins.Add("lol.1v1.weaponskins.melee.pickaxe.scifihammer");
                        break;
                    case "Warhammer":
                        serverUser.Skins.EquippedWeaponSkins.Add("lol.1v1.weaponskins.melee.pickaxe.warhammer");
                        serverUser.Skins.WeaponSkins.Add("lol.1v1.weaponskins.melee.pickaxe.warhammer");
                        break;
                    case "Chicken Axe":
                        serverUser.Skins.EquippedWeaponSkins.Add("lol.1v1.weaponskins.melee.pickaxe.chicken_leg");
                        serverUser.Skins.WeaponSkins.Add("lol.1v1.weaponskins.melee.pickaxe.chicken_leg");
                        break;
                    case "Candy Cane":
                        serverUser.Skins.EquippedWeaponSkins.Add("lol.1v1.weaponskins.melee.pickaxe.candycane");
                        serverUser.Skins.WeaponSkins.Add("lol.1v1.weaponskins.melee.pickaxe.candycane");
                        break;
                    case "Lethal Gift":
                        serverUser.Skins.EquippedWeaponSkins.Add("lol.1v1.weaponskins.melee.pickaxe.christmas_present");
                        serverUser.Skins.WeaponSkins.Add("lol.1v1.weaponskins.melee.pickaxe.christmas_present");
                        break;
                }
            }
        }

        // gameplay
        public static void LeaveGame()
        {
            PhotonNetwork.Disconnect();
        }

        // fun
        public static void AddFakeGold()
        {
            CurrencyManager.LIPLNDMKLDB?.AddHardCurrency(10000);
        }
        public static void AddFakeGems()
        {
            CurrencyManager.LIPLNDMKLDB?.AddLoLTokens(10000);
        }
    }
}
